# ç„“æ¹¿å›¾è®¡ç®—å·¥å…· - è…¾è®¯äº‘ Serverless ç‰ˆ

> ğŸš€ **å…¨æ–° Serverless æ¶æ„** - é›¶è¿ç»´ã€æŒ‰éœ€ä»˜è´¹ã€è‡ªåŠ¨æ‰©å®¹

[![Serverless](https://img.shields.io/badge/Serverless-Framework-orange)](https://serverless.com/)
[![Tencent Cloud](https://img.shields.io/badge/Tencent-Cloud-blue)](https://cloud.tencent.com/)
[![Python](https://img.shields.io/badge/Python-3.8+-green)](https://python.org/)
[![React](https://img.shields.io/badge/React-18+-blue)](https://reactjs.org/)

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**ç„“æ¹¿å›¾è®¡ç®—å·¥å…· v3.0** é‡‡ç”¨è…¾è®¯äº‘ Serverless æ¶æ„ï¼Œæä¾›ä¸“ä¸šçš„æ¹¿ç©ºæ°”çƒ­åŠ›å­¦å‚æ•°è®¡ç®—å’Œäº¤äº’å¼ç„“æ¹¿å›¾ç»˜åˆ¶åŠŸèƒ½ã€‚

### âœ¨ æ ¸å¿ƒåŠŸèƒ½

- ğŸ”¢ **æ™ºèƒ½è®¡ç®—**: è¾“å…¥ä»»æ„ä¸¤ä¸ªæ¹¿ç©ºæ°”å‚æ•°ï¼Œè‡ªåŠ¨è®¡ç®—å…¶ä»–æ‰€æœ‰å‚æ•°
- ğŸ“Š **äº¤äº’å¼å›¾è¡¨**: åœ¨ç„“æ¹¿å›¾ä¸Šç»˜åˆ¶å¤šä¸ªçŠ¶æ€ç‚¹å’Œè¿‡ç¨‹çº¿
- ğŸ¨ **è‡ªå®šä¹‰æ ·å¼**: æ”¯æŒè‡ªå®šä¹‰ç‚¹çš„é¢œè‰²ã€æ ‡è®°æ ·å¼å’Œçº¿çš„æ ·å¼
- ğŸ“± **å“åº”å¼ç•Œé¢**: ç°ä»£åŒ–çš„Webç•Œé¢ï¼Œæ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- ğŸ”„ **å®æ—¶æ›´æ–°**: å‚æ•°ä¿®æ”¹åå›¾è¡¨å®æ—¶æ›´æ–°
- ğŸ“‹ **æ•°æ®ç®¡ç†**: æ”¯æŒæ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤çŠ¶æ€ç‚¹å’Œè¿‡ç¨‹çº¿

### ğŸ—ï¸ Serverless æ¶æ„ä¼˜åŠ¿

- ğŸ”¥ **é›¶è¿ç»´**: æ— éœ€ç®¡ç†æœåŠ¡å™¨ï¼Œä¸“æ³¨ä¸šåŠ¡é€»è¾‘
- ğŸ’° **æŒ‰éœ€ä»˜è´¹**: ä»…ä¸ºå®é™…ä½¿ç”¨çš„è®¡ç®—èµ„æºä»˜è´¹ï¼ˆæœˆæˆæœ¬Â¥13-110ï¼‰
- âš¡ **è‡ªåŠ¨æ‰©å®¹**: æ ¹æ®è¯·æ±‚é‡è‡ªåŠ¨è°ƒæ•´èµ„æº
- ğŸ›¡ï¸ **é«˜å¯ç”¨**: å¤šåœ°åŸŸå®¹ç¾ï¼Œ99.9% å¯ç”¨æ€§
- ğŸŒ **å…¨çƒåŠ é€Ÿ**: CDN åŠ é€Ÿï¼Œæ¯«ç§’çº§å“åº”

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯ (Serverless)
- **è…¾è®¯äº‘å‡½æ•° SCF**: æŒ‰éœ€æ‰§è¡Œçš„è®¡ç®—æœåŠ¡
- **FastAPI**: ç°ä»£åŒ–Webæ¡†æ¶
- **CoolProp**: çƒ­åŠ›å­¦å±æ€§è®¡ç®—åº“
- **Matplotlib**: å›¾è¡¨ç”Ÿæˆï¼ˆServerlessä¼˜åŒ–ï¼‰
- **API ç½‘å…³**: ç»Ÿä¸€APIå…¥å£

### å‰ç«¯ (é™æ€æ‰˜ç®¡)
- **React 18**: ç”¨æˆ·ç•Œé¢æ¡†æ¶
- **Ant Design**: UIç»„ä»¶åº“
- **Recharts**: äº¤äº’å¼å›¾è¡¨åº“
- **Zustand**: çŠ¶æ€ç®¡ç†
- **è…¾è®¯äº‘ COS**: é™æ€ç½‘ç«™æ‰˜ç®¡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Node.js**: 14.x æˆ–æ›´é«˜ç‰ˆæœ¬
- **Python**: 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
- **è…¾è®¯äº‘è´¦å·**: éœ€è¦ API å¯†é’¥
- **Serverless Framework**: å°†è‡ªåŠ¨å®‰è£…

### æ­¥éª¤ 1: å…‹éš†é¡¹ç›®

```bash
# ä» GitHub å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/psychro-calculator.git
cd psychro-calculator
```

### æ­¥éª¤ 2: é…ç½®è…¾è®¯äº‘å‡­è¯

#### æ–¹æ³•ä¸€ï¼šç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰

```bash
export TENCENT_SECRET_ID=your_secret_id
export TENCENT_SECRET_KEY=your_secret_key
```

#### æ–¹æ³•äºŒï¼šé…ç½®æ–‡ä»¶

```bash
# å¤åˆ¶é…ç½®æ¨¡æ¿
cp config.example.js config.js

# ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¡«å…¥å®é™…çš„è…¾è®¯äº‘å‡­è¯
vim config.js
```

### æ­¥éª¤ 3: æ‰‹åŠ¨éƒ¨ç½²

#### å®Œæ•´éƒ¨ç½²

```bash
# èµ‹äºˆè„šæœ¬æ‰§è¡Œæƒé™
chmod +x deploy-serverless.sh

# ä¸€é”®éƒ¨ç½²
./deploy-serverless.sh deploy
```

#### åˆ†æ­¥éƒ¨ç½²

```bash
# ä»…éƒ¨ç½²åç«¯ API
./deploy-serverless.sh backend

# ä»…éƒ¨ç½²å‰ç«¯é™æ€ç½‘ç«™
./deploy-serverless.sh frontend
```

#### æ‰‹åŠ¨é€æ­¥éƒ¨ç½²

```bash
# 1. å®‰è£… Serverless Framework
npm install -g serverless

# 2. éƒ¨ç½²åç«¯äº‘å‡½æ•°
cd backend
pip install -r requirements-serverless.txt
serverless deploy

# 3. æ›´æ–°å‰ç«¯ API é…ç½®ï¼ˆä½¿ç”¨éƒ¨ç½²åçš„ API åœ°å€ï¼‰
# ç¼–è¾‘ frontend/src/config/api.js æ–‡ä»¶

# 4. éƒ¨ç½²å‰ç«¯é™æ€ç½‘ç«™
cd ../frontend
npm install
npm run build:prod
serverless deploy
```

## ğŸŒ è®¿é—®åº”ç”¨

éƒ¨ç½²å®Œæˆåï¼Œæ‚¨å°†çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š

```
=== ç„“æ¹¿å›¾è®¡ç®—å·¥å…· Serverless éƒ¨ç½²å®Œæˆ ===

éƒ¨ç½²ç»“æœ:
âœ“ åç«¯ API: https://service-xxx.gz.apigw.tencentcs.com/release
  - API æ–‡æ¡£: https://service-xxx.gz.apigw.tencentcs.com/release/docs
  - å¥åº·æ£€æŸ¥: https://service-xxx.gz.apigw.tencentcs.com/release/health

âœ“ å‰ç«¯ç½‘ç«™: https://psychro-calculator-prod-1234567890.cos-website.ap-guangzhou.myqcloud.com
```

## ğŸ“– API æ¥å£

### è®¡ç®—å•ä¸ªçŠ¶æ€ç‚¹
```http
POST /calculate
Content-Type: application/json

{
  "P": 101325.0,
  "T": 298.15,
  "R": 0.6
}
```

### è®¡ç®—å¤šä¸ªçŠ¶æ€ç‚¹
```http
POST /calculate-multiple
Content-Type: application/json

{
  "pressure": 101325.0,
  "points": [
    {
      "name": "ç‚¹A",
      "inputs": {"T": 298.15, "R": 0.6},
      "color": "blue"
    }
  ]
}
```

### ç”Ÿæˆç„“æ¹¿å›¾æ•°æ®
```http
POST /generate-chart
Content-Type: application/json

{
  "pressure": 101325.0,
  "points": [...],
  "process_lines": [...]
}
```

### æ··é£å¤„ç†
```http
POST /mixing
Content-Type: application/json

{
  "pressure": 101325.0,
  "point1": {"tdb": 25, "w": 10},
  "point2": {"tdb": 15, "w": 5},
  "ratio": 0.6
}
```

## ğŸ”§ ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€
./deploy-serverless.sh status

# æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯
./deploy-serverless.sh help

# ç§»é™¤éƒ¨ç½²
./deploy-serverless.sh remove

# æŸ¥çœ‹åç«¯çŠ¶æ€
cd backend && serverless info

# æŸ¥çœ‹å‰ç«¯çŠ¶æ€
cd frontend && serverless info

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
cd backend && serverless logs -f api -t
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
psychro-calculator/
â”œâ”€â”€ backend/                    # åç«¯äº‘å‡½æ•°
â”‚   â”œâ”€â”€ serverless.yml         # äº‘å‡½æ•°é…ç½®
â”‚   â”œâ”€â”€ main_app.py            # FastAPI åº”ç”¨ï¼ˆServerless ä¼˜åŒ–ï¼‰
â”‚   â”œâ”€â”€ calculator.py          # è®¡ç®—æ ¸å¿ƒæ¨¡å—ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰
â”‚   â”œâ”€â”€ performance.py         # æ€§èƒ½ä¼˜åŒ–æ¨¡å—
â”‚   â””â”€â”€ requirements-serverless.txt # Serverless ä¾èµ–
â”œâ”€â”€ frontend/                   # å‰ç«¯é™æ€ç½‘ç«™
â”‚   â”œâ”€â”€ serverless.yml         # é™æ€ç½‘ç«™æ‰˜ç®¡é…ç½®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ config/api.js      # API é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ App.js             # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ components/        # React ç»„ä»¶
â”‚   â””â”€â”€ package.json           # å‰ç«¯ä¾èµ–
â”œâ”€â”€ deploy-serverless.sh        # ä¸€é”®éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ config.example.js           # é…ç½®ç¤ºä¾‹
â”œâ”€â”€ serverless.yml             # ç»Ÿä¸€éƒ¨ç½²é…ç½®
â””â”€â”€ README.md                  # é¡¹ç›®è¯´æ˜
```

## âš¡ æ€§èƒ½ä¼˜åŒ–

é¡¹ç›®å·²é›†æˆå¤šé¡¹ Serverless ä¼˜åŒ–ï¼š

- **å†·å¯åŠ¨ä¼˜åŒ–**: ä¾èµ–é¢„çƒ­ã€ç»“æœç¼“å­˜ã€å†…å­˜ç®¡ç†
- **è®¡ç®—ç¼“å­˜**: ç»“æœç¼“å­˜ 10 åˆ†é’Ÿï¼Œå‡å°‘é‡å¤è®¡ç®—
- **å›¾è¡¨ä¼˜åŒ–**: é™ä½ DPIï¼Œå‡å°‘å†…å­˜ä½¿ç”¨
- **CDN åŠ é€Ÿ**: å…¨çƒè¾¹ç¼˜èŠ‚ç‚¹åˆ†å‘
- **é¢„ç½®å¹¶å‘**: å¯é€‰é…ç½®å‡å°‘å†·å¯åŠ¨æ—¶é—´

## ğŸ’° æˆæœ¬åˆ†æ

### æŒ‰éœ€ä»˜è´¹æ¨¡å‹

| æœåŠ¡ | è®¡è´¹æ–¹å¼ | é¢„ä¼°æˆæœ¬ï¼ˆæœˆï¼‰ |
|------|----------|----------------|
| **äº‘å‡½æ•° SCF** | æ‰§è¡Œæ¬¡æ•° + æ‰§è¡Œæ—¶é•¿ | Â¥5-50 |
| **å¯¹è±¡å­˜å‚¨ COS** | å­˜å‚¨ç©ºé—´ + è¯·æ±‚æ¬¡æ•° | Â¥1-10 |
| **API ç½‘å…³** | API è°ƒç”¨æ¬¡æ•° | Â¥2-20 |
| **CDN åŠ é€Ÿ** | æµé‡ä½¿ç”¨é‡ | Â¥5-30 |
| **æ€»è®¡** | - | **Â¥13-110** |

### æˆæœ¬ä¼˜åŠ¿

- **æ¯”ä¼ ç»ŸæœåŠ¡å™¨èŠ‚çœ 70%+**: ä» Â¥200+/æœˆ é™è‡³ Â¥13-110/æœˆ
- **é›¶è¿ç»´æˆæœ¬**: æ— éœ€ä¸“é—¨çš„è¿ç»´äººå‘˜
- **å¼¹æ€§è®¡è´¹**: ä½ä½¿ç”¨é‡æ—¶æˆæœ¬æä½

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. éƒ¨ç½²å¤±è´¥

```bash
# æ£€æŸ¥ Serverless Framework
npm install -g serverless@latest

# æ£€æŸ¥è…¾è®¯äº‘æƒé™
serverless info
```

#### 2. API è°ƒç”¨å¤±è´¥

```bash
# æ£€æŸ¥åç«¯çŠ¶æ€
cd backend && serverless info

# æŸ¥çœ‹å‡½æ•°æ—¥å¿—
serverless logs -f api

# æµ‹è¯•å¥åº·æ£€æŸ¥
curl https://your-api-url/health
```

#### 3. å‰ç«¯æ— æ³•è®¿é—® API

æ£€æŸ¥ `frontend/src/config/api.js` ä¸­çš„ API åœ°å€æ˜¯å¦æ­£ç¡®æ›´æ–°ä¸ºéƒ¨ç½²åçš„å®é™…åœ°å€ã€‚

### è·å–å¸®åŠ©

- **è…¾è®¯äº‘æ–‡æ¡£**: [Serverless åº”ç”¨ä¸­å¿ƒ](https://cloud.tencent.com/document/product/1154)
- **æŠ€æœ¯æ”¯æŒ**: é€šè¿‡è…¾è®¯äº‘å·¥å•ç³»ç»Ÿ
- **é¡¹ç›® Issues**: [GitHub Issues](https://github.com/your-username/psychro-calculator/issues)

## ğŸ” å®‰å…¨ä¸åˆè§„

- **HTTPS å¼ºåˆ¶**: æ‰€æœ‰é€šä¿¡å¼ºåˆ¶ HTTPS åŠ å¯†
- **CORS é…ç½®**: åˆç†çš„è·¨åŸŸè®¿é—®æ§åˆ¶
- **è®¿é—®æ—¥å¿—**: å®Œæ•´çš„è®¿é—®å’Œæ“ä½œæ—¥å¿—
- **æƒé™ç®¡ç†**: åŸºäºè…¾è®¯äº‘ IAM çš„ç²¾ç»†æƒé™æ§åˆ¶

## ğŸš§ å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘

```bash
# å¯åŠ¨åç«¯æœ¬åœ°å¼€å‘
cd backend
pip install -r requirements-serverless.txt
python main_app.py

# å¯åŠ¨å‰ç«¯æœ¬åœ°å¼€å‘
cd frontend
npm install
npm start
```

### ç¯å¢ƒå˜é‡

å¼€å‘ç¯å¢ƒä¼šè‡ªåŠ¨ä½¿ç”¨ `localhost:7000` ä½œä¸º API åœ°å€ï¼Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨éƒ¨ç½²åçš„å®é™…åœ°å€ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- [CoolProp](http://www.coolprop.org/) - çƒ­åŠ›å­¦å±æ€§è®¡ç®—åº“
- [è…¾è®¯äº‘ Serverless](https://cloud.tencent.com/product/sls) - Serverless è®¡ç®—å¹³å°
- [FastAPI](https://fastapi.tiangolo.com/) - ç°ä»£åŒ–Python Webæ¡†æ¶
- [React](https://reactjs.org/) - ç”¨æˆ·ç•Œé¢åº“

---

â­ **å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªæ˜Ÿæ ‡ï¼**

ğŸš€ **ç«‹å³å¼€å§‹æ‚¨çš„ Serverless ä¹‹æ—…ï¼š**

```bash
git clone https://github.com/your-username/psychro-calculator.git
cd psychro-calculator
./deploy-serverless.sh deploy
``` 